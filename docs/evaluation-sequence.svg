<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="980" height="360" viewBox="0 0 980 360">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#444"/>
    </marker>
    <style>
      .box { fill:#f7f7f7; stroke:#bbb; rx:6; ry:6; }
      .title { font: 600 13px Arial, sans-serif; fill:#222; }
      .label { font: 12px Arial, sans-serif; fill:#333; }
      .small { font: 11px Arial, sans-serif; fill:#555; }
      .line { stroke:#444; stroke-width:1.5; marker-end:url(#arrow); }
      .swim { stroke:#eee; stroke-width:1; }
    </style>
  </defs>

  <!-- Swimlanes -->
  <g>
    <line class="swim" x1="0" y1="70" x2="980" y2="70"/>
    <line class="swim" x1="0" y1="150" x2="980" y2="150"/>
    <line class="swim" x1="0" y1="230" x2="980" y2="230"/>
    <line class="swim" x1="0" y1="310" x2="980" y2="310"/>
  </g>

  <!-- Nodes -->
  <g>
    <rect class="box" x="20" y="20" width="140" height="40"/>
    <text class="title" x="90" y="45" text-anchor="middle">Client (Web/CLI)</text>

    <rect class="box" x="200" y="20" width="130" height="40"/>
    <text class="title" x="265" y="45" text-anchor="middle">API (FastAPI)</text>

    <rect class="box" x="360" y="20" width="110" height="40"/>
    <text class="title" x="415" y="45" text-anchor="middle">Celery</text>

    <rect class="box" x="500" y="20" width="120" height="40"/>
    <text class="title" x="560" y="45" text-anchor="middle">Worker</text>

    <rect class="box" x="650" y="20" width="120" height="40"/>
    <text class="title" x="710" y="45" text-anchor="middle">Postgres</text>

    <rect class="box" x="800" y="20" width="140" height="40"/>
    <text class="title" x="870" y="45" text-anchor="middle">MinIO (S3)</text>
  </g>

  <!-- Flows -->
  <!-- 1. Upload artifact -->
  <line class="line" x1="90" y1="90" x2="265" y2="90"/>
  <text class="label" x="178" y="85" text-anchor="middle">Upload artifact</text>
  <line class="line" x1="265" y1="105" x2="870" y2="105"/>
  <text class="small" x="565" y="120" text-anchor="middle">Store object, return presigned URL</text>

  <!-- 2. Enqueue evaluation -->
  <line class="line" x1="90" y1="170" x2="265" y2="170"/>
  <text class="label" x="178" y="165" text-anchor="middle">POST /evaluations</text>
  <line class="line" x1="265" y1="185" x2="415" y2="185"/>
  <text class="small" x="340" y="200" text-anchor="middle">Queue task</text>

  <!-- 3. Worker runs simulations + rules -->
  <line class="line" x1="415" y1="210" x2="560" y2="210"/>
  <text class="small" x="488" y="225" text-anchor="middle">Dequeue task</text>
  <line class="line" x1="560" y1="230" x2="710" y2="230"/>
  <text class="small" x="635" y="245" text-anchor="middle">Write results/index</text>

  <!-- 4. Report generation -->
  <line class="line" x1="560" y1="260" x2="870" y2="260"/>
  <text class="small" x="715" y="275" text-anchor="middle">Upload HTML/PDF report</text>

  <!-- 5. Fetch results/report -->
  <line class="line" x1="265" y1="300" x2="90" y2="300"/>
  <text class="label" x="178" y="295" text-anchor="middle">GET run, presigned report URLs</text>
  <line class="line" x1="870" y1="320" x2="90" y2="320"/>
  <text class="small" x="480" y="335" text-anchor="middle">Client opens presigned URLs</text>

  <!-- Captions -->
  <text class="small" x="490" y="12" text-anchor="middle">Inclusive Design Platform â€” Evaluation Flow</text>
</svg>

